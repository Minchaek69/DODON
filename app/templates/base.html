<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}DODON | 행운을 가져다주는 옷{% endblock %}</title>

    <!-- SEO -->
    <meta
      name="description"
      content="DODON은 20~35세 여성을 위한 유니크한 감성의 브랜드입니다. 롱스커트, 미니원피스, 오버핏 상의 등, 나만의 행운을 이끄는 개성 있는 옷들을 만나보세요."
    />
    <meta
      name="keywords"
      content="DODON, 도돈, 여성의류, 유니크 옷, 개성 있는 패션, 행운을 부르는 옷, 미니 원피스, 롱스커트, 오버핏 셔츠, 니트, 레싱스, Korean fashion, lucky clothes for women, 20s style, 30s fashion, minimalist clothing, casual wear, trendy outfits, knitwear"
    />
    <meta name="author" content="DODON" />
    <link rel="canonical" href="https://www.dodon.kr/" />

    <!-- Favicon -->
    <link
      rel="icon"
      href="{{ url_for('static', filename='images/DODON logo.png') }}"
      type="image/png"
    />

    <!-- CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="DODON | 행운을 가져다주는 옷" />
    <meta
      property="og:description"
      content="20~35세 여성을 위한 도돈만의 감성 의류. 행운을 끌어당기는 유니크한 스타일을 지금 만나보세요."
    />
    <meta
      property="og:image"
      content="{{ url_for('static', filename='images/og-image.jpg') }}"
    />
    <meta property="og:url" content="https://www.dodon.kr/" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <style>
      .flash-messages {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 9999;
        width: auto;
        max-width: 90%;
      }

      .alert {
        padding: 12px 24px;
        border-radius: 6px;
        font-weight: bold;
        color: white;
        margin-bottom: 10px;
        text-align: center;
        animation: fadeOut 5s forwards;
      }

      .alert-success {
        background-color: #28a745;
      }

      .alert-error {
        background-color: #dc3545;
      }

      .alert-info {
        background-color: #17a2b8;
      }

      @keyframes fadeOut {
        0% {
          opacity: 1;
        }
        90% {
          opacity: 1;
        }
        100% {
          opacity: 0;
          display: none;
        }
      }
    </style>
  </head>

  <body>
    {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %} {% for category, message in messages %}
    <div class="alert alert-{{ category }}">{{ message }}</div>
    {% endfor %} {% endif %} {% endwith %}

    <header class="header-bar">
      <div class="header-container">
        <!-- Left: Logo -->
        <div class="header-left">
          <a href="/">
            <img src="/static/images/dodon_logo_wide.png" alt="DODON Logo" />
          </a>
        </div>

        <!-- Center: Navigation Menu -->
        <nav class="header-center">
          <ul>
            <li><a href="#">홈</a></li>
            <li><a href="#">전체 상품</a></li>
            <li><a href="#">상의</a></li>
            <li><a href="#">하의</a></li>
            <li><a href="#">원피스</a></li>
            <li><a href="#">문의하기</a></li>
            <li><a href="#">About us</a></li>
          </ul>
        </nav>

        <!-- Right: Icons -->
        <div class="header-right">
          <form action="/search" method="GET" class="search-inline">
            <i class="fa-solid fa-magnifying-glass"></i>
            <input type="text" name="q" placeholder="검색" class="search-box" />
          </form>
          <a href="/cart" title="장바구니"
            ><i class="fa-solid fa-bag-shopping"></i
          ></a>
          {% if session.get('email') %}
          <!-- 로그인 상태: 사용자 정보로 이동 -->
          <a href="{{ url_for('main.profile') }}" title="마이페이지">
            <i class="fa-solid fa-user"></i>
          </a>
          <a href="{{ url_for('auth_bp.logout') }}" title="로그아웃">
            <i class="fa-solid fa-right-from-bracket"></i>
          </a>
          {% else %}
          <!-- 비로그인 상태: 로그인 모달 열기 -->
          <a id="login-trigger" title="로그인">
            <i class="fa-solid fa-user"></i>
          </a>
          {% endif %}
        </div>
      </div>
    </header>
    <!-- Main Page Content -->
    <main>{% block content %} {% endblock %}</main>

    <!-- Footer -->
    <footer>
      <div class="footer-links">
        <a href="#">Contact</a>
        <a href="#">Instagram</a>
        <a href="#">Pinterest</a>
        <a href="#">Terms</a>
      </div>
      <p>&copy; {{ current_year }} DODON. All rights reserved.</p>
    </footer>

    {% include 'login_modal.html' %} {% include 'signup_modal.html' %}
    <!-- JS -->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script src="{{ url_for('static', filename='js/login_modal.js') }}"></script>
    <script src="{{ url_for('static', filename='js/signup_modal.js') }}"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const loginModal = document.getElementById("login-modal");
        const loginTrigger = document.getElementById("login-trigger");
        const loginClose = document.querySelector(".login-close");

        const signupModal = document.getElementById("signup-modal");
        const signupClose = document.querySelector(".signup-close");
        const signupTrigger = document.querySelector(".open-signup");

        if (loginTrigger && loginModal) {
          loginTrigger.addEventListener("click", () =>
            loginModal.classList.remove("hidden")
          );
        }
        if (loginClose) {
          loginClose.addEventListener("click", () =>
            loginModal.classList.add("hidden")
          );
        }

        if (signupTrigger && signupModal) {
          signupTrigger.addEventListener("click", () => {
            loginModal.classList.add("hidden");
            signupModal.classList.remove("hidden");
          });
        }

        if (signupClose) {
          signupClose.addEventListener("click", () =>
            signupModal.classList.add("hidden")
          );
        }
      });
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        {% if session.get('email') %}
          // 로그인 후 모달 닫기
          const loginModal = document.getElementById("login-modal");
          const signupModal = document.getElementById("signup-modal");
          if (loginModal) loginModal.classList.add("hidden");
          if (signupModal) signupModal.classList.add("hidden");
        {% endif %}
      });
    </script>
    {% block scripts %}{% endblock %}
  </body>
</html>
